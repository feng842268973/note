### chrome架构 ###

**线程vs进程**

>线程是不能单独存在的，它是由进程来启动和管理的。

一个进程就是一个程序的运行实例。启动一个程序的时候，操作系统会为该进程创建一块内存，用来存放代码，运行中的数据和一个执行任务的主线程，把这样一个运行环境叫做进程。
线程是依附于进程的，进程中使用多线程并行处理能提升运算效率。
线程与进程的关系：
- 进程中任意线程出现，都会导致整个进程的崩溃
- 线程之间共享进程中的数据
- 当一个进程关闭后，操作系统会回收进程所占用的内存
- 进程之间的内容相互隔离（如果需要进程之间数据通信，需要ipc的机制）

**单进程浏览器**
单进程浏览器所有功能模块都运行在同一个进程里，导致单进程浏览器不稳定，不流畅，不安全。

**多进程架构**
最新的chrome浏览器包含：一个浏览器主进程，一个gpu进程，一个网络进程，多个渲染进程和多个插件进程。
- 浏览器进程：主要负责界面的显示，用户交互，子进程管理，同时提供存储等功能。
- 渲染进程：核心任务是将html，css，js转换为用户可与之交互的网页，排版引擎blink和v8引擎都运行在该进程中。默认请款贡献，chrome会为每个tab标签创建一个渲染进程，出于安全考虑，渲染进程都是运行在沙箱模式下的。
- gpu进程：最初是为了实现3d css效果，随后网页的ui界面都采用gpu来绘制。
- 网络进程：主要负责页面的网络加载。
- 插件进程：负责插件的运行，因插件易崩溃，所以需要通过插件进程来隔离，以保证插件进程崩溃不会对浏览器和页面造成影响

**多进程的缺点**
- 更高的资源占用：每个进程都会包含公共基础结构的副本（如js运行环境），这意味着浏览器会消耗更多的内存资源
- 更复杂的体系架构：浏览器各模块之间耦合性高、扩展性差等问题，会导致现在的架构已经很难适应新的需求了。

